<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>ü¶æ Or√ßameintor</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet" />
  <style>
    /* Reset b√°sico */
    * {
      box-sizing: border-box;
    }

    body {
      background: #121b1a;
      color: #d0f0e6;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 20px;
      max-width: 600px;
      margin: auto;
      user-select: none;
    }

    header {
      margin-bottom: 15px;
      user-select: text;
    }

    header h1 {
      font-family: 'Orbitron', monospace;
      font-weight: 900;
      font-size: 2.2rem;
      color: #5aa897;
      margin-bottom: 4px;
    }

    header nav {
      font-size: 0.85rem;
      color: #7fd9c9;
    }

    label {
      display: block;
      font-weight: 600;
      margin-top: 15px;
      user-select: text;
      color: #79b3a6;
    }

    input,
    textarea {
      width: 100%;
      padding: 10px 12px;
      margin-top: 6px;
      border: 1.5px solid #3a6c61;
      border-radius: 6px;
      background: #203934;
      color: #d0f0e6;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      transition: border-color 0.3s ease;
      resize: vertical;
    }
    input:focus,
    textarea:focus {
      border-color: #5aa897;
      outline: none;
      background: #2b4b45;
    }

    button {
      margin-top: 25px;
      background-color: #5aa897;
      border: none;
      padding: 12px 0;
      width: 100%;
      color: #f0f7f7;
      font-weight: 700;
      font-size: 1.1rem;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      user-select: none;
      font-family: 'Orbitron', monospace;
      letter-spacing: 0.05em;
    }
    button:hover {
      background-color: #3b7a70;
    }
    button:active {
      background-color: #2e5e54;
    }

    .item-group {
      background: #203934;
      padding: 15px 20px;
      margin-top: 25px;
      border-radius: 12px;
      box-shadow: 0 3px 8px rgba(90, 168, 151, 0.3);
      user-select: text;
    }

    .item-group h2 {
      font-family: 'Orbitron', monospace;
      font-weight: 700;
      font-size: 1.3rem;
      color: #3b7a70;
      margin-bottom: 12px;
    }

    .item-group label {
      margin-top: 12px;
      color: #7fd9c9;
    }

    hr {
      border: none;
      border-top: 1px dashed #3a6c61;
      margin: 15px 0;
      user-select: none;
    }

    .total {
      margin-top: 30px;
      font-size: 1.8rem;
      font-weight: 900;
      color: #5aa897;
      text-align: center;
      font-family: 'Orbitron', monospace;
      user-select: text;
    }

    /* Migalhas de p√£o simples */
    nav.breadcrumb {
      font-size: 0.85rem;
      margin-bottom: 12px;
      color: #79b3a6;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      user-select: text;
    }
    nav.breadcrumb span {
      margin-right: 6px;
    }
    nav.breadcrumb span::after {
      content: "‚Ä∫";
      margin-left: 6px;
      color: #3a6c61;
    }
    nav.breadcrumb span:last-child::after {
      content: "";
    }

    /* Footer maroto */
    :root {
      --cor-primaria: #5aa897;
      --cor-secundaria: #39ffb8;
    }
    .footer-maroto {
      position: fixed;
      bottom: 12px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(10, 31, 28, 0.85);
      color: var(--cor-primaria);
      font-family: 'Orbitron', monospace;
      font-weight: 700;
      font-size: 0.9rem;
      padding: 8px 18px;
      border-radius: 24px;
      box-shadow: 0 0 12px var(--cor-primaria);
      user-select: none;
      cursor: default;
      z-index: 9999;
      animation: brilho-pulsante 3.5s ease-in-out infinite;
      text-shadow:
        0 0 6px var(--cor-primaria),
        0 0 12px var(--cor-secundaria),
        0 0 20px var(--cor-primaria);
      letter-spacing: 0.08em;
      transition: box-shadow 0.3s ease;
    }
    .footer-maroto a {
      color: var(--cor-secundaria);
      text-decoration: none;
      font-weight: 900;
      transition: color 0.3s ease;
    }
    .footer-maroto a:hover,
    .footer-maroto a:focus {
      color: #39ffb8;
      outline: none;
      text-shadow: 0 0 8px #39ffb8;
    }
    @keyframes brilho-pulsante {
      0%, 100% {
        box-shadow:
          0 0 12px var(--cor-primaria),
          0 0 20px var(--cor-secundaria),
          0 0 30px var(--cor-primaria);
        text-shadow:
          0 0 6px var(--cor-primaria),
          0 0 14px var(--cor-secundaria),
          0 0 22px var(--cor-primaria);
      }
      50% {
        box-shadow:
          0 0 8px var(--cor-primaria),
          0 0 14px var(--cor-secundaria),
          0 0 20px var(--cor-primaria);
        text-shadow:
          0 0 4px var(--cor-primaria),
          0 0 10px var(--cor-secundaria),
          0 0 18px var(--cor-primaria);
      }
    }
  </style>
</head>
<body>

  <header>
    <nav class="breadcrumb" aria-label="Voc√™ est√° aqui:">
      <span>Or√ßameintor</span>
    </nav>
    <h1>ü¶æ Or√ßameintor</h1>
  </header>

  <label for="cliente">Cliente</label>
  <input type="text" id="cliente" autocomplete="off" placeholder="Nome do cliente" />

  <label for="profissional">Profissional</label>
  <input type="text" id="profissional" autocomplete="off" placeholder="Seu nome ou da empresa" />

  <div class="item-group">
    <h2>Itens Personalizados</h2>
    <div id="itensExtras"></div>
    <button type="button" onclick="adicionarItem()">+ Adicionar Item</button>
  </div>

  <label for="observacoes">Observa√ß√µes</label>
  <textarea id="observacoes" rows="3" placeholder="Detalhes adicionais"></textarea>

  <div class="total">Total: R$ <span id="total">0,00</span></div>

  <button type="button" onclick="gerarPDF()">üßæ Gerar PDF</button>
  <button type="button" onclick="exportarJSON()">üíæ Exportar JSON</button>
  <button type="button" onclick="limparTudo()">üßπ Limpar Tudo</button>

  <footer class="footer-maroto" role="contentinfo" aria-label="Rodap√© do Or√ßameintor">
    <span>ü¶æ Or√ßameintor &nbsp;&middot;&nbsp; Desenvolvido por <a href="https://github.com/Ganjabionick8" target="_blank" rel="noopener noreferrer" aria-label="GitHub Ganjabionick8">Ganjabionick8</a> &nbsp;&mdash;&nbsp; 2025</span>
  </footer>

  <script>
    const itensExtras = [];

    function adicionarItem() {
      const container = document.getElementById("itensExtras");
      const index = itensExtras.length;

      const div = document.createElement("div");
      div.style.marginBottom = "16px";
      div.innerHTML = `
        <label for="item_nome_${index}">Nome do item</label>
        <input type="text" id="item_nome_${index}" placeholder="Ex: Material, Servi√ßo..." autocomplete="off" />
        <label for="item_qtd_${index}">Quantidade</label>
        <input type="number" id="item_qtd_${index}" value="0" min="0" step="1" />
        <label for="item_preco_${index}">Pre√ßo unit√°rio (R$)</label>
        <input type="number" id="item_preco_${index}" value="0" min="0" step="0.01" />
        <hr />
      `;
      container.appendChild(div);
      itensExtras.push(index);
      atualizarTotal();

      // Atualiza total ao mudar qualquer input novo
      const inputs = div.querySelectorAll('input');
      inputs.forEach(input => input.addEventListener('input', atualizarTotal));
    }

    function atualizarTotal() {
      let total = 0;

      itensExtras.forEach(i => {
        const qtd = parseFloat(document.getElementById(`item_qtd_${i}`).value) || 0;
        const preco = parseFloat(document.getElementById(`item_preco_${i}`).value) || 0;
        total += qtd * preco;
      });

      document.getElementById("total").innerText = total.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
    }

    // Atualiza total ao mudar inputs principais (cliente, profissional, observacoes n√£o influenciam no total)
    document.querySelectorAll("input").forEach(input => {
      input.addEventListener("input", atualizarTotal);
    });

    function gerarPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      let y = 10;
      const lineHeight = 8;
      const marginLeft = 10;
      const maxLineWidth = 190;

      const cliente = document.getElementById("cliente").value || "N/A";
      const profissional = document.getElementById("profissional").value || "N/A";
      const obs = document.getElementById("observacoes").value || "";
      const total = document.getElementById("total").innerText;

      doc.setFont("helvetica", "bold");
      doc.setFontSize(14);
      doc.text("ü¶æ Or√ßameintor", marginLeft, y);
      y += lineHeight + 2;

      doc.setFont("helvetica", "normal");
      doc.setFontSize(11);
      doc.text(`Cliente: ${cliente}`, marginLeft, y);
      y += lineHeight;
      doc.text(`Profissional: ${profissional}`, marginLeft, y);
      y += lineHeight + 6;

      doc.setFont("helvetica", "bold");
      doc.text("Itens Or√ßados:", marginLeft, y);
      y += lineHeight;

      doc.setFont("helvetica", "normal");
      itensExtras.forEach(i => {
        const nome = document.getElementById(`item_nome_${i}`).value || `Item ${i + 1}`;
        const qtd = parseFloat(document.getElementById(`item_qtd_${i}`).value) || 0;
        const preco = parseFloat(document.getElementById(`item_preco_${i}`).value) || 0;
        const linha = `${nome}: ${qtd} √ó R$ ${preco.toLocaleString('pt-BR', { minimumFractionDigits: 2 })} = R$ ${(qtd * preco).toLocaleString('pt-BR', { minimumFractionDigits: 2 })}`;
        const splitText = doc.splitTextToSize(linha, maxLineWidth);
        doc.text(splitText, marginLeft, y);
        y += lineHeight * splitText.length;
      });

      y += 6;
      doc.setFont("helvetica", "bold");
      doc.text("Observa√ß√µes:", marginLeft, y);
      y += lineHeight;

      doc.setFont("helvetica", "normal");
      const obsSplit = doc.splitTextToSize(obs, maxLineWidth);
      doc.text(obsSplit, marginLeft, y);
      y += lineHeight * obsSplit.length + 10;

      doc.setFont("helvetica", "bold");
      doc.setFontSize(13);
      doc.text(`TOTAL: R$ ${total}`, marginLeft, y);

      y += lineHeight + 10;
      doc.setFont("helvetica", "normal");
      doc.setFontSize(9);
      doc.text("Gerado com Or√ßameintor ‚Ä¢ Desenvolvido por Ganjabionick8", marginLeft, y);

      doc.save("orcamento_orcameintor.pdf");
    }

    function exportarJSON() {
      const dados = {
        cliente: document.getElementById("cliente").value,
        profissional: document.getElementById("profissional").value,
        observacoes: document.getElementById("observacoes").value,
        itensExtras: itensExtras.map(i => ({
          nome: document.getElementById(`item_nome_${i}`).value,
          qtd: document.getElementById(`item_qtd_${i}`).value,
          preco: document.getElementById(`item_preco_${i}`).value
        }))
      };
      const blob = new Blob([JSON.stringify(dados, null, 2)], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "orcamento_orcameintor.json";
      a.click();
    }

    function limparTudo() {
      if (confirm("Limpar todos os campos?")) location.reload();
    }
  </script>

</body>
</html>
