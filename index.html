<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>ü¶æ Or√ßameintor</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet" />
  <style>
    :root {
      --cor-primaria: #5aa897;
      --cor-secundaria: #39ffb8;
      --fundo-claro: #f5f7f9;
      --texto-claro: #2e2e2e;
      --fundo-escuro: #121b1a;
      --texto-escuro: #d0f0e6;
      --input-bg-claro: #e9f0f0;
      --input-bg-escuro: #203934;
      --borda-claro: #a8c0c0;
      --borda-escuro: #3a6c61;
    }

    /* Reset b√°sico */
    * {
      box-sizing: border-box;
    }

    body {
      background: var(--fundo-escuro);
      color: var(--texto-escuro);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 20px;
      max-width: 600px;
      margin: auto;
      user-select: none;
      transition: background-color 0.4s, color 0.4s;
    }
    body.light {
      background: var(--fundo-claro);
      color: var(--texto-claro);
    }

    header {
      margin-bottom: 15px;
      user-select: text;
    }

    header h1 {
      font-family: 'Orbitron', monospace;
      font-weight: 900;
      font-size: 2.2rem;
      color: var(--cor-primaria);
      margin-bottom: 4px;
    }

    header nav {
      font-size: 0.85rem;
      color: #7fd9c9;
    }

    label {
      display: block;
      font-weight: 600;
      margin-top: 15px;
      user-select: text;
      color: #79b3a6;
    }
    body.light label {
      color: #4f6367;
    }

    input,
    textarea {
      width: 100%;
      padding: 10px 12px;
      margin-top: 6px;
      border: 1.5px solid var(--borda-escuro);
      border-radius: 6px;
      background: var(--input-bg-escuro);
      color: var(--texto-escuro);
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      transition: border-color 0.3s ease, background-color 0.3s ease, color 0.3s ease;
      resize: vertical;
    }
    input:focus,
    textarea:focus {
      border-color: var(--cor-primaria);
      outline: none;
      background: #2b4b45;
    }
    body.light input,
    body.light textarea {
      background: var(--input-bg-claro);
      border-color: var(--borda-claro);
      color: var(--texto-claro);
    }
    body.light input:focus,
    body.light textarea:focus {
      background: #d1e3e3;
      border-color: var(--cor-primaria);
    }

    button {
      margin-top: 25px;
      background-color: var(--cor-primaria);
      border: none;
      padding: 12px 0;
      width: 100%;
      color: #f0f7f7;
      font-weight: 700;
      font-size: 1.1rem;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      user-select: none;
      font-family: 'Orbitron', monospace;
      letter-spacing: 0.05em;
    }
    button:hover {
      background-color: #3b7a70;
    }
    button:active {
      background-color: #2e5e54;
    }

    .item-group {
      background: var(--input-bg-escuro);
      padding: 15px 20px;
      margin-top: 25px;
      border-radius: 12px;
      box-shadow: 0 3px 8px rgba(90, 168, 151, 0.3);
      user-select: text;
      transition: background-color 0.4s;
    }
    body.light .item-group {
      background: var(--input-bg-claro);
    }

    .item-group h2 {
      font-family: 'Orbitron', monospace;
      font-weight: 700;
      font-size: 1.3rem;
      color: var(--cor-primaria);
      margin-bottom: 12px;
    }

    .item-group label {
      margin-top: 12px;
      color: #7fd9c9;
    }
    body.light .item-group label {
      color: #4f6367;
    }

    hr {
      border: none;
      border-top: 1px dashed var(--borda-escuro);
      margin: 15px 0;
      user-select: none;
      transition: border-color 0.3s;
    }
    body.light hr {
      border-top-color: var(--borda-claro);
    }

    .total {
      margin-top: 30px;
      font-size: 1.8rem;
      font-weight: 900;
      color: var(--cor-primaria);
      text-align: center;
      font-family: 'Orbitron', monospace;
      user-select: text;
      transition: color 0.4s;
    }

    /* Migalhas de p√£o simples */
    nav.breadcrumb {
      font-size: 0.85rem;
      margin-bottom: 12px;
      color: #79b3a6;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      user-select: text;
    }
    body.light nav.breadcrumb {
      color: #4f6367;
    }
    nav.breadcrumb span {
      margin-right: 6px;
    }
    nav.breadcrumb span::after {
      content: "‚Ä∫";
      margin-left: 6px;
      color: var(--borda-escuro);
    }
    body.light nav.breadcrumb span::after {
      color: var(--borda-claro);
    }
    nav.breadcrumb span:last-child::after {
      content: "";
    }

    /* Footer maroto */
    .footer-maroto {
      position: fixed;
      bottom: 12px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(10, 31, 28, 0.85);
      color: var(--cor-primaria);
      font-family: 'Orbitron', monospace;
      font-weight: 700;
      font-size: 0.9rem;
      padding: 8px 18px;
      border-radius: 24px;
      box-shadow: 0 0 12px var(--cor-primaria);
      user-select: none;
      cursor: default;
      z-index: 9999;
      animation: brilho-pulsante 3.5s ease-in-out infinite;
      text-shadow:
        0 0 6px var(--cor-primaria),
        0 0 12px var(--cor-secundaria),
        0 0 20px var(--cor-primaria);
      letter-spacing: 0.08em;
      transition: box-shadow 0.3s ease;
    }
    .footer-maroto a {
      color: var(--cor-secundaria);
      text-decoration: none;
      font-weight: 900;
      transition: color 0.3s ease;
    }
    .footer-maroto a:hover,
    .footer-maroto a:focus {
      color: #39ffb8;
      outline: none;
      text-shadow: 0 0 8px #39ffb8;
    }
    @keyframes brilho-pulsante {
      0%, 100% {
        box-shadow:
          0 0 12px var(--cor-primaria),
          0 0 20px var(--cor-secundaria),
          0 0 30px var(--cor-primaria);
        text-shadow:
          0 0 6px var(--cor-primaria),
          0 0 14px var(--cor-secundaria),
          0 0 22px var(--cor-primaria);
      }
      50% {
        box-shadow:
          0 0 8px var(--cor-primaria),
          0 0 14px var(--cor-secundaria),
          0 0 20px var(--cor-primaria);
        text-shadow:
          0 0 4px var(--cor-primaria),
          0 0 10px var(--cor-secundaria),
          0 0 18px var(--cor-primaria);
      }
    }

    /* Toggle tema */
    .tema-toggle {
      position: fixed;
      top: 18px;
      right: 18px;
      background: var(--cor-primaria);
      border: none;
      border-radius: 20px;
      width: 50px;
      height: 26px;
      cursor: pointer;
      box-shadow: 0 0 8px var(--cor-primaria);
      transition: background-color 0.3s ease;
      z-index: 9999;
    }
    .tema-toggle:before {
      content: "";
      position: absolute;
      top: 3px;
      left: 3px;
      width: 20px;
      height: 20px;
      background: #fff;
      border-radius: 50%;
      transition: transform 0.3s ease;
    }
    body.light .tema-toggle {
      background: #3b7a70;
    }
    body.light .tema-toggle:before {
      transform: translateX(24px);
    }
  </style>
</head>
<body>

  <button aria-label="Alternar tema claro e escuro" class="tema-toggle"></button>

  <header>
    <nav class="breadcrumb" aria-label="Voc√™ est√° aqui:">
      <span>Or√ßameintor</span>
    </nav>
    <h1>ü¶æ Or√ßameintor</h1>
  </header>

  <label for="cliente">Cliente</label>
  <input type="text" id="cliente" autocomplete="off" placeholder="Nome do cliente" />

  <label for="profissional">Profissional</label>
  <input type="text" id="profissional" autocomplete="off" placeholder="Seu nome ou da empresa" />

  <div class="item-group" aria-label="Itens personalizados do or√ßamento">
    <h2>Itens Personalizados</h2>
    <div id="itensExtras"></div>
    <button type="button" onclick="adicionarItem()">+ Adicionar Item</button>
  </div>

  <label for="observacoes">Observa√ß√µes</label>
  <textarea id="observacoes" rows="3" placeholder="Detalhes adicionais"></textarea>

  <div class="total" aria-live="polite">Total: R$ <span id="total">0,00</span></div>

  <button type="button" onclick="gerarPDF()">üßæ Gerar PDF</button>
  <button type="button" onclick="exportarJSON()">üíæ Exportar JSON</button>
  <button type="button" onclick="limparTudo()">üßπ Limpar Tudo</button>

  <footer style="
  background: #121212;
  color: #aaa;
  font-size: 14px;
  text-align: center;
  padding: 15px 20px;
  border-top: 1px solid #333;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  user-select: none;
  line-height: 1.5;
">
  <div>¬© 2025 Or√ßameintor ‚Ä¢ Feito com ‚ù§Ô∏è por Gabriel Simeone</div>
  <div style="margin: 6px 0;">
    Se curtiu, ajuda a manter o projeto vivo! üôè<br />
    PIX: <a href="pix:123.456.789-00" style="color: #5aa897; text-decoration: none; font-weight: 700;">biel.simeone@gmail.com</a>
  </div>
  <div style="font-style: italic; color: #666;">
    ‚ÄúSe dinheiro n√£o traz felicidade, pelo menos paga o servidor.‚Äù üí∏üòé
  </div>
</footer>


  <script>
    const itensExtras = [];

    function adicionarItem() {
      const container = document.getElementById("itensExtras");
      const index = itensExtras.length;

      const div = document.createElement("div");
      div.style.marginBottom = "16px";
      div.innerHTML = `
        <label for="item_nome_${index}">Nome do item</label>
        <input type="text" id="item_nome_${index}" placeholder="Ex: Material, Servi√ßo..." autocomplete="off" />
        <label for="item_qtd_${index}">Quantidade</label>
        <input type="number" id="item_qtd_${index}" value="0" min="0" step="1" />
        <label for="item_preco_${index}">Pre√ßo unit√°rio (R$)</label>
        <input type="number" id="item_preco_${index}" value="0" min="0" step="0.01" />
        <hr />
      `;
      container.appendChild(div);
      itensExtras.push(index);
      atualizarTotal();

      const inputs = div.querySelectorAll('input');
      inputs.forEach(input => input.addEventListener('input', atualizarTotal));
      salvarOrcamentoAutomatico();
    }

    function atualizarTotal() {
      let total = 0;
      itensExtras.forEach(i => {
        const qtd = parseFloat(document.getElementById(`item_qtd_${i}`).value) || 0;
        const preco = parseFloat(document.getElementById(`item_preco_${i}`).value) || 0;
        total += qtd * preco;
      });
      document.getElementById("total").innerText = total.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
      salvarOrcamentoAutomatico();
    }

    // Salvamento localStorage
    function salvarOrcamentoAutomatico() {
      const dados = coletarDados();
      localStorage.setItem("orcamentoAtual", JSON.stringify(dados));
    }

    function carregarOrcamento() {
      const dadosStr = localStorage.getItem("orcamentoAtual");
      if (!dadosStr) return;
      const dados = JSON.parse(dadosStr);

      document.getElementById("cliente").value = dados.cliente || "";
      document.getElementById("profissional").value = dados.profissional || "";
      document.getElementById("observacoes").value = dados.observacoes || "";

      // Limpa itens atuais
      const container = document.getElementById("itensExtras");
      container.innerHTML = "";
      itensExtras.length = 0;

      if (dados.itensExtras && dados.itensExtras.length) {
        dados.itensExtras.forEach((item, i) => {
          adicionarItem();
          document.getElementById(`item_nome_${i}`).value = item.nome || "";
          document.getElementById(`item_qtd_${i}`).value = item.qtd || 0;
          document.getElementById(`item_preco_${i}`).value = item.preco || 0;
        });
      }
      atualizarTotal();
    }

    function coletarDados() {
      return {
        cliente: document.getElementById("cliente").value,
        profissional: document.getElementById("profissional").value,
        observacoes: document.getElementById("observacoes").value,
        itensExtras: itensExtras.map(i => ({
          nome: document.getElementById(`item_nome_${i}`).value,
          qtd: document.getElementById(`item_qtd_${i}`).value,
          preco: document.getElementById(`item_preco_${i}`).value
        }))
      };
    }

    // Tema toggle
    const btnTema = document.querySelector('.tema-toggle');
    btnTema.addEventListener('click', () => {
      document.body.classList.toggle('light');
      salvarTema();
    });

    function salvarTema() {
      localStorage.setItem('temaOrcameintor', document.body.classList.contains('light') ? 'light' : 'dark');
    }

    function carregarTema() {
      const tema = localStorage.getItem('temaOrcameintor');
      if (tema === 'light') {
        document.body.classList.add('light');
      } else {
        document.body.classList.remove('light');
      }
    }

    // Gerar PDF
    function gerarPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      let y = 10;
      const lineHeight = 8;
      const marginLeft = 10;
      const maxLineWidth = 190;

      const cliente = document.getElementById("cliente").value || "N/A";
      const profissional = document.getElementById("profissional").value || "N/A";
      const obs = document.getElementById("observacoes").value || "";
      const total = document.getElementById("total").innerText;

      // Cabe√ßalho customizado
      doc.setFont("helvetica", "bold");
      doc.setFontSize(18);
      doc.setTextColor(90, 168, 151);
      doc.text("ü¶æ Or√ßameintor", marginLeft, y);
      y += lineHeight + 4;

      doc.setFont("helvetica", "normal");
      doc.setFontSize(11);
      doc.setTextColor(0, 0, 0);
      doc.text(`Cliente: ${cliente}`, marginLeft, y);
      y += lineHeight;
      doc.text(`Profissional: ${profissional}`, marginLeft, y);
      y += lineHeight + 6;

      doc.setFont("helvetica", "bold");
      doc.setTextColor(50, 90, 80);
      doc.text("Itens Or√ßados:", marginLeft, y);
      y += lineHeight;

      doc.setFont("helvetica", "normal");
      doc.setTextColor(0, 0, 0);
      itensExtras.forEach(i => {
        const nome = document.getElementById(`item_nome_${i}`).value || `Item ${i + 1}`;
        const qtd = parseFloat(document.getElementById(`item_qtd_${i}`).value) || 0;
        const preco = parseFloat(document.getElementById(`item_preco_${i}`).value) || 0;
        const linha = `${nome}: ${qtd} √ó R$ ${preco.toLocaleString('pt-BR', { minimumFractionDigits: 2 })} = R$ ${(qtd * preco).toLocaleString('pt-BR', { minimumFractionDigits: 2 })}`;
        const splitText = doc.splitTextToSize(linha, maxLineWidth);
        doc.text(splitText, marginLeft, y);
        y += lineHeight * splitText.length;
      });

      y += 6;
      doc.setFont("helvetica", "bold");
      doc.setTextColor(50, 90, 80);
      doc.text("Observa√ß√µes:", marginLeft, y);
      y += lineHeight;

      doc.setFont("helvetica", "normal");
      doc.setTextColor(0, 0, 0);
      const obsSplit = doc.splitTextToSize(obs, maxLineWidth);
      doc.text(obsSplit, marginLeft, y);
      y += lineHeight * obsSplit.length + 10;

      doc.setFont("helvetica", "bold");
      doc.setFontSize(14);
      doc.setTextColor(90, 168, 151);
      doc.text(`TOTAL: R$ ${total}`, marginLeft, y);

      y += lineHeight + 10;
      doc.setFont("helvetica", "normal");
      doc.setFontSize(9);
      doc.setTextColor(100);
      doc.text("Gerado com Or√ßameintor ‚Ä¢ Desenvolvido por Ganjabionick8", marginLeft, y);

      doc.save("orcamento_orcameintor.pdf");
    }

    // Exportar JSON
    function exportarJSON() {
      const dados = coletarDados();
      const blob = new Blob([JSON.stringify(dados, null, 2)], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "orcamento_orcameintor.json";
      a.click();
    }

    // Limpar tudo
    function limparTudo() {
      if (confirm("Limpar todos os campos?")) {
        localStorage.removeItem("orcamentoAtual");
        location.reload();
      }
    }

    // Carregar dados ao iniciar
    window.onload = () => {
      carregarTema();
      carregarOrcamento();
    };
  </script>

</body>
</html>
